<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Basic restatis Workflow • restatis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic restatis Workflow">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">restatis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/restatis.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/additional_parameter.html">Additional Parameters for API Calls with {restatis}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CorrelAid/restatis/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Basic restatis Workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CorrelAid/restatis/blob/main/vignettes/restatis.Rmd" class="external-link"><code>vignettes/restatis.Rmd</code></a></small>
      <div class="d-none name"><code>restatis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://correlaid.github.io/restatis/">restatis</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes the basic workflow for finding, exploring,
and retrieving data from the GENESIS, Zensus 2022 or
regionalstatistik.de API using <a href="https://correlaid.github.io/restatis/">restatis</a>.</p>
<p>For more details on additional parameters that can be used to specify
the API call, see <code><a href="../articles/additional_parameter.html">vignette("additional_parameter")</a></code>.</p>
<p>For the scenario in this vignette, we are going to be a researcher
trying to find data on the income of bus drivers, called “Busfahrer” in
German. The following example focuses on the GENESIS database, however,
it works practically identical for regionalstatistik.de. For the Zensus
2022 database, the functions also work almost similarly to GENESIS and
regionalstatistik.de, but have a few quirks (such as that there are no
cubes for Zensus 2022 or that you can also authenticate using an API
token).</p>
</div>
<div class="section level2">
<h2 id="premilinary-finding-relevant-search-terms">Premilinary: finding relevant search terms<a class="anchor" aria-label="anchor" href="#premilinary-finding-relevant-search-terms"></a>
</h2>
<p>First, we can and should explore if and how our keyword is
represented in the GENESIS database. We want to see if our keywords are
related in any way to other words, and we need to be more precise in our
search process; or in case we already have a particular keyword, if
there are related keywords that could be included in our search to
expand our data collection.</p>
<p>To be as broad as possible, we want to search for any term in the
database that contains our keyword. To do this, we can use a “*”
wildcard at the beginning and end of the search term:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">restatis</span><span class="fu">::</span><span class="fu"><a href="../reference/gen_alternative_terms.html">gen_alternative_terms</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"*busfahrer*"</span>, database <span class="op">=</span> <span class="st">"genesis"</span><span class="op">)</span></span></code></pre></div>
<p>Based on the results, our original keyword “busfahrer” is already
specific enough, and no additional specifications are necessary.</p>
<p>Had we started with the keyword “bus” - the vehicle itself - we can
see that the database has several related terms that might be helpful to
narrow our search radius further. In this example, it might be helpful
to see that there are at least three different types of buses that are
searchable: “fernbus”, “schienenbus” and “kraftomnibusse”.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_alternative_terms.html">gen_alternative_terms</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"*bus*"</span>, database <span class="op">=</span> <span class="st">"genesis"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="search-for-data-objects">Search for data objects<a class="anchor" aria-label="anchor" href="#search-for-data-objects"></a>
</h2>
<p>Now that we have our specific keyword for our search, we can search
the database for exactly that term. We want the results to be ordered so
that items with a title that includes our search term are at the top. We
also want to explore all object types for now:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">search_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gen_find.html">gen_find</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"busfahrer"</span>,</span>
<span>                           detailed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                           ordering <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                           category <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                           database <span class="op">=</span> <span class="st">"genesis"</span><span class="op">)</span></span>
<span>                           </span>
<span><span class="va">search_results</span></span></code></pre></div>
<p>We can see that we find results for our keyword “busfahrer” in each
category of objects (statistics, tables, variables, and cubes). Based on
the promising content description of the first cube object, our next
step will be to check what it contains before requesting the data.</p>
<p>As a side note, most of the functions in this package will return
objects with additional attributes that represent the parameters and
additional information of your API query. So check the attributes if you
ever need help recognising how you got the output.</p>
</div>
<div class="section level2">
<h2 id="checking-object-metadata">Checking object metadata<a class="anchor" aria-label="anchor" href="#checking-object-metadata"></a>
</h2>
<p>To check whether data objects are relevant to your interest, you
should obtain the metadata for these objects before requesting the data
itself. The metadata for each type of object stores different key
characteristics that will help you understand what the object is
about.</p>
<p>For our question about the income of bus drivers, we want to check
the metadata of the first cube object we got from the find function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_metadata.html">gen_metadata</a></span><span class="op">(</span>code <span class="op">=</span> <span class="va">search_results</span><span class="op">$</span><span class="va">Cubes</span><span class="op">$</span><span class="va">Code</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>             category <span class="op">=</span> <span class="va">search_results</span><span class="op">$</span><span class="va">Cubes</span><span class="op">$</span><span class="va">Object_Type</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>             database <span class="op">=</span> <span class="st">"genesis"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="retrieving-data">Retrieving data<a class="anchor" aria-label="anchor" href="#retrieving-data"></a>
</h2>
<p>We are now pretty sure that this cube object will help us find
information about our research question. The next step is to get the
data from the API.</p>
<p>Based on the fact that we want a cube object, we now use the
<code><a href="../reference/gen_cube.html">gen_cube()</a></code> function. For other object types, use the
corresponding functions (e.g., <code><a href="../reference/gen_table.html">gen_table()</a></code> for tables).</p>
<p>Important note: It is not possible to get a whole statistic object,
but it is possible to collect the different related cube objects
independently and then try to recombine them.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_cube.html">gen_cube</a></span><span class="op">(</span><span class="va">search_results</span><span class="op">$</span><span class="va">Cubes</span><span class="op">$</span><span class="va">Code</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, database <span class="op">=</span> <span class="st">"genesis"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="appendix-check-for-changes-in-previously-collected-data">Appendix: check for changes in previously collected data<a class="anchor" aria-label="anchor" href="#appendix-check-for-changes-in-previously-collected-data"></a>
</h2>
<p>As a small additional step, we would like to check one week later if
the collected data objects have been updated in the last week. We can
also check if additional interesting data objects for our
interest/keyword have been added to the database. To do this, we need to
specify the code of the objects we are looking for and the time we want
to look for updates.</p>
<p>If we only want to check if something related has been updated, we
only need to use the first part of the code until we are sure that it
only covers the topic we are interested in. For example, use “62361*” if
you want to check if some updated objects have been published for the
specific statistic “Verdiensterhebung”.</p>
<p>For convenience, the functions have already implemented the most
common <code>date</code> specifications, such as “week_before”,
“month_before”, or “year_before”. If you prefer a fixed date, you can
enter it as a string in the format “DD.MM.YYYY”.</p>
<p>For example, we might want to check to see if something new has been
published about our collected cube object. So we use only the first part
of the code “62361*“:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_modified_data.html">gen_modified_data</a></span><span class="op">(</span>code <span class="op">=</span> <span class="st">"62361"</span>, date <span class="op">=</span> <span class="st">"week_before"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yannik Buhl, Zoran Kovacevic, Dorian Le Jeune, Long Nguyen, Johannes Ritter.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
