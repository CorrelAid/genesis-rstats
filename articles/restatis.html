<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="restatis">
<title>Basic restatis Workflow • restatis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic restatis Workflow">
<meta property="og:description" content="restatis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">restatis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/restatis.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Basic restatis Workflow</h1>
            
      
      
      <div class="d-none name"><code>restatis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://correlaid.github.io/restatis/">restatis</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes the basic workflow for finding, exploring,
and retrieving data from the GENESIS API using <a href="https://correlaid.github.io/restatis/">restatis</a>.</p>
<p>For the scenario in this vignette, we are going to be a researcher
trying to find data on the income of bus drivers, called
“Busfahrer”.</p>
</div>
<div class="section level2">
<h2 id="premilinary-finding-relevant-search-terms">Premilinary: finding relevant search terms<a class="anchor" aria-label="anchor" href="#premilinary-finding-relevant-search-terms"></a>
</h2>
<p>First, we can and should explore if and how our keyword is
represented in the GENESIS database. We want to see if our keywords are
related in any way to other words, and we need to be more precise in our
search process; or in case we already have a particular keyword, if
there are related keywords that could be included in our search to
expand our data collection.</p>
<p>To be as broad as possible, we want to search for any term in the
database that contains our keyword. To do this, we can use a “*”
wildcard at the beginning and end of the search term:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_alternative_terms.html">gen_alternative_terms</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"*busfahrer*"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Output</span></span>
<span><span class="co">#&gt; [1] "busfahrer"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"Term")</span></span>
<span><span class="co">#&gt; [1] "*busfahrer*"</span></span>
<span><span class="co">#&gt; attr(,"Language")</span></span>
<span><span class="co">#&gt; [1] "de"</span></span>
<span><span class="co">#&gt; attr(,"Pagelength")</span></span>
<span><span class="co">#&gt; [1] "100"</span></span>
<span><span class="co">#&gt; attr(,"Copyright")</span></span>
<span><span class="co">#&gt; [1] "© Statistisches Bundesamt (Destatis), 2023"</span></span></code></pre></div>
<p>Based on the results, our original keyword “busfahrer” is already
specific enough, and no additional specifications are necessary.</p>
<p>Had we started with the keyword “bus” - the vehicle itself - we can
see that the database has several related terms that might be helpful to
narrow our search radius further. In this example, it might be helpful
to see that there are at least three different types of buses that are
searchable: “fernbus”, “schienenbus” and “kraftomnibusse”.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_alternative_terms.html">gen_alternative_terms</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"*bus*"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Output</span></span>
<span><span class="co">#&gt;  [1] "Bus"                  "bus"                  "busin"               </span></span>
<span><span class="co">#&gt;  [4] "Busse"                "busse"                "bambus"              </span></span>
<span><span class="co">#&gt;  [7] "bussen"               "büsche"               "cottbus"             </span></span>
<span><span class="co">#&gt; [10] "fernbus"              "a.bambus"             "aubussons"           </span></span>
<span><span class="co">#&gt; [13] "business"             "jadebusen"            "busfahrer"           </span></span>
<span><span class="co">#&gt; [16] "busin.and"            "bambusmöbel"          "bambuswaren"         </span></span>
<span><span class="co">#&gt; [19] "bustickets"           "f.omnibusse"          "buschbohnen"         </span></span>
<span><span class="co">#&gt; [22] "kraftomnibus"         "bambussprossen"       "büstenhalter"        </span></span>
<span><span class="co">#&gt; [25] "kraftomnibusse"       "businessschool"       "freilandbüsche"      </span></span>
<span><span class="co">#&gt; [28] "busin.sch.berlin"     "doppellumentubus"     "bambusflechtstoffen" </span></span>
<span><span class="co">#&gt; [31] "flugticket, business" "business-class-tarif"</span></span>
<span><span class="co">#&gt;  [ reached getOption("max.print") -- omitted 68 entries ]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"Term")</span></span>
<span><span class="co">#&gt; [1] "*bus*"</span></span>
<span><span class="co">#&gt; attr(,"Language")</span></span>
<span><span class="co">#&gt; [1] "de"</span></span>
<span><span class="co">#&gt; attr(,"Pagelength")</span></span>
<span><span class="co">#&gt; [1] "100"</span></span>
<span><span class="co">#&gt; attr(,"Copyright")</span></span>
<span><span class="co">#&gt; [1] "© Statistisches Bundesamt (Destatis), 2023"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="search-for-data-objects">Search for data objects<a class="anchor" aria-label="anchor" href="#search-for-data-objects"></a>
</h2>
<p>Now that we have our specific keyword for our search, we can search
the database for exactly that term. We want the results to be ordered so
that items with a title that includes our search term are at the top. We
also want to explore all object types for now:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">search_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gen_find.html">gen_find</a></span><span class="op">(</span></span>
<span>  term <span class="op">=</span> <span class="st">"busfahrer"</span>,</span>
<span>  detailed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ordering <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  category <span class="op">=</span> <span class="st">"all"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Use 'detailed = TRUE' to obtain the complete output.</span></span>
<span></span>
<span><span class="va">search_results</span></span>
<span><span class="co">#&gt; $Tables</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span><span class="co">#&gt;   Code       Content                                                        Object_Type</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;                                                          &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1 62361-0030 Bruttostundenverdienste, Bruttomonatsverdienste: Deutschland,… Table      </span></span>
<span><span class="co">#&gt; 2 62361-0034 Bruttojahresverdienste: Deutschland, Jahre, Geschlecht, Berufe Table      </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Statistics</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;   Code  Content           Object_Type</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1 62361 Verdiensterhebung Statistic  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Variables</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span><span class="co">#&gt;   Code   Content                             Object_Type</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;                               &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1 KB10A5 Berufsgattungen (KB2010), 5-Steller Variable   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Cubes</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span><span class="co">#&gt;   Code       Content                                                        Object_Type</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;                                                          &lt;chr&gt;      </span></span>
<span><span class="co">#&gt; 1 62361BJ013 Verdiensterhebung, Durchschn. Bruttostundenverdienste ohne So… Cube       </span></span>
<span><span class="co">#&gt; 2 62361BJ010 Verdiensterhebung, Durchschn. Bruttostundenverdienste ohne So… Cube       </span></span>
<span><span class="co">#&gt; 3 62361BJ019 Verdiensterhebung, Durchschn. Bruttojahresverdienste inkl. So… Cube       </span></span>
<span><span class="co">#&gt; 4 62361BJ016 Verdiensterhebung, Durchschn. Bruttojahresverdienste inkl. So… Cube       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attr(,"Term")</span></span>
<span><span class="co">#&gt; [1] "busfahrer"</span></span>
<span><span class="co">#&gt; attr(,"Language")</span></span>
<span><span class="co">#&gt; [1] "de"</span></span>
<span><span class="co">#&gt; attr(,"Pagelength")</span></span>
<span><span class="co">#&gt; [1] "100"</span></span>
<span><span class="co">#&gt; attr(,"Copyright")</span></span>
<span><span class="co">#&gt; [1] "© Statistisches Bundesamt (Destatis), 2023"</span></span></code></pre></div>
<p>We can see that we find results for our keyword “busfahrer” in each
category of objects (statistics, tables, variables, and cubes). Based on
the promising content description of the first cube object, our next
step will be to check what it contains before requesting the data.</p>
<p>As a side note, most of the functions in this package will return
objects with additional attributes that represent the parameters and
additional information of your GENESIS API query. So check the
attributes if you ever need help recognising how you got the output.</p>
</div>
<div class="section level2">
<h2 id="checking-object-metadata">Checking object metadata<a class="anchor" aria-label="anchor" href="#checking-object-metadata"></a>
</h2>
<p>To check whether GENESIS data objects are relevant to your interest,
you should obtain the metadata for these objects before requesting the
data itself. The metadata for each type of object stores different key
characteristics that will help you understand what the object is
about.</p>
<p>For our question about the income of bus drivers, we want to check
the metadata of the first cube object we got from the find function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_metadata.html">gen_metadata</a></span><span class="op">(</span></span>
<span>  code <span class="op">=</span> <span class="va">search_results</span><span class="op">$</span><span class="va">Cubes</span><span class="op">$</span><span class="va">Code</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  category <span class="op">=</span> <span class="va">search_results</span><span class="op">$</span><span class="va">Cubes</span><span class="op">$</span><span class="va">Object_Type</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in gen_metadata(code = search_results$Cubes$Code[1], category = search_results$Cubes$Object_Type[1]): could not find function "gen_metadata"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="retrieving-data">Retrieving data<a class="anchor" aria-label="anchor" href="#retrieving-data"></a>
</h2>
<p>We are now pretty sure that this cube object will help us find
information about our research question. The next step is to get the
data from the GENESIS API.</p>
<p>Based on the fact that we want a cube object, we now use the
<code><a href="../reference/gen_cube.html">gen_cube()</a></code> function. For other GENESIS object types, use
the corresponding functions (e.g., <code><a href="../reference/gen_table.html">gen_table()</a></code> for
tables).</p>
<p>Important note: It is not possible to get a whole GENESIS statistic
object, but it is possible to collect the different related cube objects
independently and then try to recombine them.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_cube.html">gen_cube</a></span><span class="op">(</span><span class="va">search_results</span><span class="op">$</span><span class="va">Cubes</span><span class="op">$</span><span class="va">Code</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2,508 × 20</span></span>
<span><span class="co">#&gt;    DINSG GES   KB10A5     SMONAT  VST045_WERT VST045_QUALITAET VST045_GESPERRT</span></span>
<span><span class="co">#&gt;  * &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;            &lt;lgl&gt;          </span></span>
<span><span class="co">#&gt;  1 DG    GESM  KB10-01104 04/2022        31.3 e                NA             </span></span>
<span><span class="co">#&gt;  2 DG    GESM  KB10-01203 04/2022        21.6 e                NA             </span></span>
<span><span class="co">#&gt;  3 DG    GESM  KB10-01302 04/2022        17.4 e                NA             </span></span>
<span><span class="co">#&gt;  4 DG    GESM  KB10-01402 04/2022        15.3 e                NA             </span></span>
<span><span class="co">#&gt;  5 DG    GESM  KB10-11101 04/2022        12.8 e                NA             </span></span>
<span><span class="co">#&gt;  6 DG    GESM  KB10-11102 04/2022        13.7 e                NA             </span></span>
<span><span class="co">#&gt;  7 DG    GESM  KB10-11103 04/2022        23.6 ()               NA             </span></span>
<span><span class="co">#&gt;  8 DG    GESM  KB10-11104 04/2022        30.8 e                NA             </span></span>
<span><span class="co">#&gt;  9 DG    GESM  KB10-11113 04/2022        21.4 ()               NA             </span></span>
<span><span class="co">#&gt; 10 DG    GESM  KB10-11114 04/2022         0   /                NA             </span></span>
<span><span class="co">#&gt; # ℹ 2,498 more rows</span></span>
<span><span class="co">#&gt; # ℹ 13 more variables: `VST045_WERT-VERFAELSCHT` &lt;dbl&gt;, VST047_WERT &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   VST047_QUALITAET &lt;chr&gt;, VST047_GESPERRT &lt;lgl&gt;, `VST047_WERT-VERFAELSCHT` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   VST051_WERT &lt;dbl&gt;, VST051_QUALITAET &lt;chr&gt;, VST051_GESPERRT &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   `VST051_WERT-VERFAELSCHT` &lt;dbl&gt;, VST052_WERT &lt;dbl&gt;, VST052_QUALITAET &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   VST052_GESPERRT &lt;lgl&gt;, `VST052_WERT-VERFAELSCHT` &lt;dbl&gt;</span></span></code></pre></div>
<p>TODO: Create helpers to decipher column names.</p>
</div>
<div class="section level2">
<h2 id="appendix-check-for-changes-in-previously-collected-data">Appendix: check for changes in previously collected data<a class="anchor" aria-label="anchor" href="#appendix-check-for-changes-in-previously-collected-data"></a>
</h2>
<p>As a small additional step, we would like to check one week later if
the collected data objects have been updated in the last week. We can
also check if additional interesting data objects for our
interest/keyword have been added to the database. To do this, we need to
specify the code of the objects we are looking for and the time we want
to look for updates.</p>
<p>If we only want to check if something related has been updated, we
only need to use the first part of the code until we are sure that it
only covers the topic we are interested in. For example, use “62361*” if
you want to check if some updated objects have been published for the
specific statistic “Verdiensterhebung”.</p>
<p>For convenience, the functions have already implemented the most
common <code>date</code> specifications, such as “week_before”,
“month_before”, or “year_before”. If you prefer a fixed date, you can
enter it as a string in the format “DD-MM-YYYY”.</p>
<p>For example, we might want to check to see if something new has been
published about our collected cube object. So we use only the first part
of the code “62361*“:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gen_modified_data.html">gen_modified_data</a></span><span class="op">(</span>code <span class="op">=</span> <span class="st">"62361"</span>, date <span class="op">=</span> <span class="st">"week_before"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Please note that this date is calculated automatically and may differ</span></span>
<span><span class="co">#&gt;                 from manually entered data. Manually entered data must have</span></span>
<span><span class="co">#&gt;                 the format DD.MM.YYYY.</span></span>
<span><span class="co">#&gt; No modified objects found for your code and date.</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Yannik Buhl, Zoran Kovacevic, Dorian Le Jeune, Long Nguyen, Johannes Ritter.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
